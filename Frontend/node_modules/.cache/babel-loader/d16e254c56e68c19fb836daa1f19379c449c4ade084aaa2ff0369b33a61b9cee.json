{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lpave\\\\ProjectPasskey\\\\Project_Passkey\\\\Frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport './App.css';\nimport { useState, useEffect } from 'react';\nimport { Routes, Route, Navigate } from 'react-router-dom';\nimport axios from 'axios';\nimport Passkey from './component/passkey.js';\nimport Board from './component/Board';\nimport ProtectedRoute from './component/ProtectedRoute';\nimport LandingPage from './component/LandingPage.js';\n\n// IMPORTANT: set axios defaults once\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\naxios.defaults.withCredentials = true;\nfunction App() {\n  _s();\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [userEmail, setUserEmail] = useState('');\n  const [isLoading, setIsLoading] = useState(true);\n\n  // Check authentication status on app load\n  useEffect(() => {\n    const checkAuth = async () => {\n      try {\n        const response = await axios.post('https://localhost:5200/webauthn/verify-token', {},\n        // no body — cookie is used\n        {\n          withCredentials: true\n        });\n        if (response.data.success) {\n          setIsAuthenticated(true);\n          setUserEmail(response.data.email);\n        } else {\n          setIsAuthenticated(false);\n          setUserEmail('');\n        }\n      } catch (error) {\n        setIsAuthenticated(false);\n        setUserEmail('');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    checkAuth();\n  }, []);\n\n  // Logout function to clear token and authentication state\n  const handleLogout = async () => {\n    try {\n      await axios.post('https://localhost:5200/logout', {}, {\n        withCredentials: true\n      });\n    } catch (err) {\n      console.error('Logout failed:', err);\n    } finally {\n      setIsAuthenticated(false);\n      setUserEmail('');\n    }\n  };\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Routes, {\n    children: [/*#__PURE__*/_jsxDEV(Route, {\n      path: \"/\",\n      element: /*#__PURE__*/_jsxDEV(LandingPage, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 32\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"/login\",\n      element: isAuthenticated ? /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"/tictactoe\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(Passkey, {\n        setIsAuthenticated: setIsAuthenticated,\n        setUserEmail: setUserEmail\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"/tictactoe\",\n      element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n        element: /*#__PURE__*/_jsxDEV(Board, {\n          username: userEmail,\n          onLogout: handleLogout\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 22\n        }, this),\n        isAuthenticated: isAuthenticated\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"uh1AgbqhhZKyfbvmVavwOUzBXTg=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useState","useEffect","Routes","Route","Navigate","axios","Passkey","Board","ProtectedRoute","LandingPage","jsxDEV","_jsxDEV","defaults","withCredentials","App","_s","isAuthenticated","setIsAuthenticated","userEmail","setUserEmail","isLoading","setIsLoading","checkAuth","response","post","data","success","email","error","handleLogout","err","console","children","fileName","_jsxFileName","lineNumber","columnNumber","path","element","to","username","onLogout","_c","$RefreshReg$"],"sources":["C:/Users/lpave/ProjectPasskey/Project_Passkey/Frontend/src/App.js"],"sourcesContent":["import './App.css';\r\nimport { useState, useEffect } from 'react';\r\nimport { Routes, Route, Navigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport Passkey from './component/passkey.js';\r\nimport Board from './component/Board';\r\nimport ProtectedRoute from './component/ProtectedRoute';\r\nimport LandingPage from './component/LandingPage.js';\r\n\r\n// IMPORTANT: set axios defaults once\r\naxios.defaults.withCredentials = true;\r\n\r\nfunction App() {\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n  const [userEmail, setUserEmail] = useState('');\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  \r\n  // Check authentication status on app load\r\n  useEffect(() => {\r\n    const checkAuth = async () => {\r\n      try {\r\n        const response = await axios.post(\r\n          'https://localhost:5200/webauthn/verify-token',\r\n          {}, // no body — cookie is used\r\n          { withCredentials: true }\r\n        );\r\n\r\n        if (response.data.success) {\r\n          setIsAuthenticated(true);\r\n          setUserEmail(response.data.email);\r\n        } else {\r\n          setIsAuthenticated(false);\r\n          setUserEmail('');\r\n        }\r\n      } catch (error) {\r\n        setIsAuthenticated(false);\r\n        setUserEmail('');\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    checkAuth();\r\n  }, []);\r\n  \r\n  // Logout function to clear token and authentication state\r\n  const handleLogout = async () => {\r\n    try {\r\n      await axios.post(\r\n        'https://localhost:5200/logout',\r\n        {},\r\n        { withCredentials: true }\r\n      );\r\n    } catch (err) {\r\n      console.error('Logout failed:', err);\r\n    } finally {\r\n      setIsAuthenticated(false);\r\n      setUserEmail('');\r\n    }\r\n  };\r\n  \r\n  if (isLoading) {\r\n    return <div>Loading...</div>;\r\n  }\r\n  \r\n  return (\r\n    <Routes>\r\n      <Route path=\"/\" element={<LandingPage />} />\r\n      <Route \r\n        path=\"/login\" \r\n        element={\r\n          isAuthenticated ? (\r\n            <Navigate to=\"/tictactoe\" />\r\n          ) : (\r\n            <Passkey setIsAuthenticated={setIsAuthenticated} setUserEmail={setUserEmail} />\r\n          )\r\n        } \r\n      />\r\n      \r\n      <Route\r\n        path=\"/tictactoe\"\r\n        element={\r\n          <ProtectedRoute\r\n            element={<Board username={userEmail} onLogout={handleLogout} />}\r\n            isAuthenticated={isAuthenticated}\r\n          />\r\n        }\r\n      />\r\n    </Routes>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}